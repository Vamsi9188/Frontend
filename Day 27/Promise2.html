<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Promise In JavaScript</title>
</head>
<body>
    <h2>Intro to JavaScript Promise</h2>
    <script>
        let moneyBorrowed=10_000;
        const moneyRecieved=(amount)=>
        {
            if(amount>0)
            {
                console.log(`Extra money ${amount} depoited in the bank`);
            }
            else
            {
                console.log(`Received Amount ${moneyBorrowed}`);
            }
        }
        let promise = new Promise((resolve,reject)=>
        {
            setTimeout(()=>
            {
                resolve(2000);
            //  reject(new Error("I'm not going to return your money"))   
            },3000); // represents 2 days
        })
        console.log(promise);
        promise.then((outcome)=>
        {
            return new Promise((resolve,reject)=>
            {
                if(outcome>moneyBorrowed)
                {
                    resolve(outcome-moneyBorrowed);
                }
                else if(outcome<moneyBorrowed)
                {
                    reject(new Error("Oh wait, this is not the full amount!"));
                }
                else
                {
                    resolve(0)
                }
            })
        })
        .then(moneyRecieved).catch((error)=>
        {
            console.error(error);
        }).finally(()=>
        {
            console.log("Finally fn - this function is always called.");
        })
       let anotherPromise = new Promise((resolve, reject)=>
        {
            setTimeout(()=>
            {

            },2000);
        })
        function succeessfulOutcome(data)
        {
            console.log(error);
        }
        function unsuccessfulOutcome(error)
        {
            console.error(error);

        }
        anotherPromise.then(succeessfulOutcome,unsuccessfulOutcome)


        const resultPromise = fetch("https://Face-Analyzer.proxy-production.allthingsdev.co/facebody/analysis/detect-face-attributes");

        resultPromise.then(outcome =>
        {
            console.log(outcome);
            const result=outcome.json();
            result.then(res =>
                {
                    console.log(res);
                }
            )
        })


        let  jsonObj='{"name":"VAmsi","age":"22"}';
        
        console.log(JSON.stringify(jsonObj));

        console.log(JSON.parse(jsonObj));



    </script>
</body>
</html>